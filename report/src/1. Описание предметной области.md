# Описание предметной области

## Формулировка задания

Спроектировать базу данных для сервиса доставки здорового питания «Grow Food», поддерживающую полный жизненный цикл заказа: от его создания и обработки до доставки клиенту и взаимодействия с поставщиками продуктов и курьерами.

## Конкретизация предметной области

Сервис доставки здорового питания «Grow Food» – это информационная система, предназначенная для автоматизации процессов работы сервиса. Система рассчитана на взаимодействие с сотрудниками сервиса, при этом пользователи (клиенты) не имеют прямого доступа к базе данных.

В рамках системы предполагается реализация следующего функционала:

- Работа с поставщиками: Учёт поставок продуктов и сроков доставки ингредиентов.
- Составление меню: Формирование меню на основе предпочтений пользователей и доступности ингредиентов. Меню составляется на следующий месяц и может быть адаптировано под индивидуальные запросы клиентов. 
- Приготовление блюд: Учёт рецептов и формирование готовых рационов. Сотрудники кухни имеют доступ к информации об ингредиентах, необходимых для приготовления блюд, а также о самих блюдах: их количестве, размере порции, калорийности и других характеристиках.
- Доставка: Курьеры имеют доступ к информации о доставленных или доставляемых заказах: дата, адрес доставки, способ оплаты и сумма к оплате (при необходимости).
- Оплата: Поддержка различных способов оплаты заказов, включая онлайн-платежи, а также учёт финансовых операций.
- Учёт предпочтений пользователей: Хранение информации о диетических ограничениях, аллергиях и предпочтениях клиентов для персонализации меню. Каждому пользователю в его личном кабинете доступна информация о выбранных предпочтениях, расписании меню на следующий месяц, количестве накопленных баллов, а также предложении оформить заказ.

Система обеспечивает взаимодействие между всеми участниками процесса: сотрудниками кухни, курьерами, поставщиками и администраторами сервиса, при этом пользователи взаимодействуют с системой через личный кабинет без прямого доступа к базе данных.

## Пользователи системы

\noindent 1. Клиенты: 

  - Это физические лица, которые заказывают готовые рационы питания через сервис «Grow Food». 
  - Пользователи не имеют прямого доступа к базе данных, но взаимодействуют с системой через личный кабинет.
  - В личном кабинете клиентам доступна следующая информация:
    - Выбранные предпочтения (диетические ограничения, аллергии, предпочтения по ингредиентам).
    - Расписание меню на следующий месяц.
    - Количество накопленных баллов (если предусмотрена бонусная система).
    - Возможность оформления новых заказов и просмотра истории заказов.

\noindent 2. Курьеры:

  - Это сотрудники сервиса, отвечающие за доставку готовых рационов клиентам.
  - Курьеры имеют доступ к информации о доставленных или доставляемых заказах, включая:
    - Дату и время доставки.
    - Адрес доставки.
    - Способ оплаты и сумму к оплате (если требуется).
  - Их задача – обеспечить своевременную и корректную доставку заказов, а также взаимодействие с клиентами при необходимости.
  
\noindent 3. Поставщики:

  - Это юридические лица или индивидуальные предприниматели, поставляющие ингредиенты для приготовления блюд.
  - Поставщики взаимодействуют с системой через сотрудников сервиса, предоставляя информацию о поставках:
    - Наименование и количество поставляемых продуктов.
    - Сроки и условия доставки.
    - Качество и соответствие стандартам.
    - Их роль – обеспечить своевременные и качественные поставки ингредиентов для приготовления блюд.
  
\noindent 4. Администраторы:

  - Это сотрудники сервиса, отвечающие за управление системой и поддержание её работоспособности.
  - Администраторы имеют полный доступ к базе данных и выполняют следующие функции:
    - Управление пользователями (клиентами, курьерами, поставщиками).
    - Контроль за составлением меню и процессом приготовления блюд.
    - Мониторинг доставки заказов и взаимодействие с курьерами.
    - Настройка и поддержка системы, включая обработку ошибок и обновление данных.

## Сроки хранения информации

В системе «Grow Food» предусмотрены различные сроки хранения информации в зависимости от её типа и назначения:

\noindent 1. Информация о заказах:
   
   - Данные о завершённых заказах (история заказов) хранятся в течение 3 лет для обеспечения возможности анализа и отчётности.
   - По истечении этого срока заказы перемещаются в архив, где хранятся ещё 2 года перед окончательным удалением.

\noindent 2. Информация о пользователях:

   - Данные о клиентах (личные данные, предпочтения, история заказов) хранятся до момента удаления аккаунта пользователем.
   - В случае неактивности аккаунта в течение 2 лет, данные перемещаются в архив и хранятся там ещё 1 год перед удалением.

\noindent 3. Информация о поставщиках и ингредиентах:

   - Данные о поставщиках и поставках хранятся в течение 5 лет для обеспечения контроля качества и анализа сотрудничества.
   - Информация о списанных или более неиспользуемых ингредиентах перемещается в архив через 1 год после их последнего использования.

\noindent 4. Информация о курьерах и доставках:

   - Данные о курьерах и их доставках хранятся в течение 3 лет для анализа эффективности работы.
   - По истечении этого срока информация перемещается в архив, где хранится ещё 1 год.

\noindent 5. Архивные данные:

   - Архивные данные хранятся в отдельной структуре базы данных для снижения нагрузки на основную систему.
   - Доступ к архивным данным ограничен и предоставляется только администраторам для целей отчётности или анализа.

## События, изменяющие состояние базы данных

Основные события, которые влияют на состояние базы данных системы «Grow Food», включают:

- Регистрация новых пользователей или удаление (деактивация) аккаунтов старых пользователей.
- Оформление нового заказа (изменение его статуса).
- Устройство нового курьера на работу.
- Добавление нового поставщика или изменение договора со старым поставщиком.
- Поступление ингредиентов от поставщиков.
- Изменение меню.
- Начисление баллов пользователям.
- Изменение в статусе оплаты заказа.

\noindent Эти события обеспечивают актуальность данных в системе и позволяют отслеживать все ключевые процессы, связанные с работой сервиса.

## Основные запросы к базе данных (на естественном языке)

Основные запросы к БД в разрезе аналитики сервиса:

- Вычисление ежедневной выручки и её прироста.
- Вычисление НДС и цен без учёта налога.
- Анализ возвращённых или отменённых заказов.
- Анализ распределения пользователей по количеству их заказов, количеству бонусов.
- Нахождение блюд с популярными (по предпочтению пользователей) ингредиентами.
- Вычисление необходимого количества ингредиентов и прогнозирование поставок.
- Определение прибыльности и актуальности меню на основе заказов.

\newpage